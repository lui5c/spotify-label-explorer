<!doctype html>
<html>
  <head>
    <title>Example of the Authorization Code flow with Spotify</title>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="static/stylesheet.css">
    <style type="text/css">
      #login, #loggedin {
        display: none;
      }
      .text-overflow {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        width: 500px;
      }
    </style>
  </head>

  <body>
		<!-- the login stuff -->
      <div id="login">
		<div class="container">
		<div id="header-container" style="font-size: 36px; padding-top: 15px">
			spotify label explorer!!!!!! <div style="display: none" id="hidden-enter-button"> <a href="/login">enter >> </a></div>
		</div>
		<h3>welcome!</h3>
		<div style="font-size: 16px">
		<p>this web app allows you to explore which labels are represented on a Spotify playlist and which labels an artist has released music on. </p>
		<p>you can use it for whatever you want, but i like to use it to find music related to the things i already listen to. many recent music streaming 
		platforms have made it a central feature in their program or software to integrate "radio" or other song suggestion mechanisms. these predictive playlists/radio stations are based on models of what the user already listen to. however, collections of music that have a similar motif, shared community, or other commonality already tend to be grouped together! they can be found by looking at the discography of a label.</p>
		<h3>labels</h3>
		<p>whenever an album is released, usually there is a "record label" that is credited with "releasing" the album. it's kind of a weird setup, and many bands elect to self-release music, bypassing any bureacracy and hoop-jumping brought on by looping in other people. most of the time, bands work with labels in a symbiotic way, where bands make music, and labels take care of promotion, advertising, maybe booking shows, and maybe getting their record pressed on vinyl for cheaper than it would be without the label. usually, the bands that a label works with all have something in common that made them work with each other.</p>
		<p>there are genre-oriented labels, location-specific labels, reissue labels, labels that only ever see one release, labels that were only in operation for a year and a half, multi-million dollar massive corporation labels, labels that get created whenever someone releases their first and only solo EP through <a href="http://www.distrokid.com/">DistroKid</a>, and any combination of those already mentioned above. it's a way funner way to find music than song suggestions from a streaming service when you finish a playlist!</p>
		<h3>example of how you might find new music</h3>
		<p>say you like a synth-pop band from Paris. you want to go on a synth-pop kick, and want to listen to all of this artist's contemporaries. you can check out "what fans listen to" (which works pretty well), but you want more. you decide to check out their label. you can see all of the albums that have been released by the label that put out that synth-pop album. maybe it turns out that this label only does synth-pop! or maybe it's a Parisian label, and you find a band that is best buddies with your original band, because they're all living within a couple blocks of each other. regardless, you have seen at least a little of a community that exists because of music. labels are really important for scenes to thrive and for small bands to find each other and find people who want to hear their music. Spotify and Apple Music don't have ways for you to explore a label the way they have ways for you to explore artists and collections of playlists. </p>
		<h3>where do i start?!</h3>
		<p>in order to enter/use the label explorer, you need to log in with Spotify &rarr; <a href="/login">log in using Spotify</a> and you will be brought to the site!</p>
		<h3>privacy</h3>
		<p>your data will not be stored anywhere, will most certainly not be sold to anybody, and will not be used for any purpose or at any time other than what happens right now.</p>
		</div> <!-- the font size setter -->
		</div> <!-- the container -->
      </div>

		<!-- once you're logged in -->
      <div id="loggedin" class="w3-container">
		<div id="oauth">
        <button class="btn btn-default" id="obtain-new-token">Obtain new token using the refresh token</button>        
		</div>
		<div id="top-guide">

		<span style="float:right"><div class="hideshow" id="hide-help">hide help</div> // <div class="hideshow" id="show-help">show help</div></span>
		<h1>welcome, <span id="person-name"></span>!</h1>
		<div id="help">
		<h3>how to use the label explorer </h3>
		<p>in the left-hand pane, you can choose between browsing your playlists and searching for artists. if you click on an artist, a list of that artists's releases, along with the label that released them, will come up. if you click on a playlist, a list of the songs in the playlist will be displayed and you will be able to see what label each song on the playlist is on. in the right-hand pane, you can search Spotify for all of the releases by a particular label. you can hide or show these instructions with the button in the top right corner.</p>
		<h3>a note about Spotify's indexing of labels</h3>
		<p>currently, there is no way to view a label's discography in Spotify, nor is there a way to retrieve a label's discography using the Spotify Web API, which this site uses. this website uses the closest approximation possible (without indexing Spotify's entire database) which is to type the following into the search bar: <code>label:"sun records"</code>, replacing sun records with whatever record label's results you want to see. on this website, search by just typing the label into the search bar. in Spotify, you have to use the <code>label:""</code> syntax.</p>
		</div> <!-- end help div -->
		</div>
		<!-- begin stuff to show when logged in that is NOT user profile -->
		<div class="overall-container">
			<div class="leftside-container">
			
			<ul class="nav nav-pills nav-fill nav-justified">
				<li id="show-playlist-search"> <a class="nav-item">browse my playlists</a> </li>
				<li id="show-artist-search"> <a class="nav-item">look up an artist</a> </li>
			</ul>		
			<div id="playlists-container">
				<table class="playlist-table" id="playlist-list-table">
					<thead>
						<tr>
							<th> playlist </th>
							<th> length </th>
							<th> playlistID </th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
				<div class="button-container">
					<button class="table-populate" id="button-populate">&#43;</button>
				</div>
			</div> <!-- end playlist container -->
			
			<div id="artists-container">
				<input id = "artist-search-box" type="text" class="form-control search-box" placeholder="search" name="search" />
				<button class="btn btn-outline-success my-2 my-sm-0" id="artist-search-button">go!</button>
				<table class="playlist-table" id="artist-search-results">
				</table>
			</div> <!-- end artist search container -->
			</div> <!-- end left half container -->
			<div id="rightside-container"> <!-- begin the search BY LABEL function -->
				<div id="search-header">
				<p> search by label </p>
				</div>	
				<input id="label-search-field" type="text" class="form-control search-box" placeholder="search" name="search" />
				<button class="btn btn-outline-success my-2 my-sm-0" id="label-search-button">go!</button>
				<button class="btn btn-outline-success my-2 my-sm-0" id="label-search-clear">clear results</button>
				<div id="label-search-container">
					<table id="label-search-results">
					</table>
					<div class="button-container">
						<button class="table-populate" id="label-populate">&#43;</button>
					</div>
				</div> <!-- end album search results container -->
			</div><!-- end right side container -->
		</div> <!-- end overall-container -->
		
		<!-- begin playlist overlay code -->
		<div id="playlist-overlay">
			<div id="overlaytitle">
				<span id="selected-playlist-name">Playlist Name</span>
				<span> by </span>
				<span id="selected-playlist-owner">Playlist Owner</span>
				<span id="close-playlist-overlay">close</span>
			</div>
			<div id="table-container">
				<table id="songs-table" class="overlay-table">
					<thead>
					<tr>
						<th> song </th>
						<th> artist </th>
						<th> album </th>
						<th> label </th>
					</tr>
					</thead>
				</table>
			</div> <!-- end table-container -->
		</div> <!-- end playlist overlay -->
		<div id="releases-overlay">
			<div id="overlaytitle">
				releases by 
				<span id="selected-artist">artist</span>
				<span id="close-artist-overlay">close</span>
			</div>
			<div id="table-container">
				<table id="releases-table" class="overlay-table">
					<thead>
					<tr>
						<th> release name </th>
						<th> date </th>
						<th> label </th>
					</tr>
					</thead>
				</table>
			</div> <!-- end table-container -->
		</div> <!-- end playlist overlay -->
	</div> <!-- end #loggedin container -->
	
	<!-- beyond this, it's all <script> tags and then </body -->
	
	<!-- the stuff for getting new tokens. probably will come later -->
    <script id="oauth-template" type="text/x-handlebars-template">
      <h2>oAuth info</h2>
      <dl class="dl-horizontal">
        <dt>Access token</dt><dd class="text-overflow">{{access_token}}</dd>
        <dt>Refresh token</dt><dd class="text-overflow">{{refresh_token}}</dd>
      </dl>
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

	
	<script src="static/script.js"></script>
  </body>
</html>